<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Upload Your Memory | Campus Chronicles</title>
  <link rel="stylesheet" href="memories.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&family=Playfair+Display:ital,wght@1,600&display=swap" rel="stylesheet">
</head>

<body>
  <div class="top-accent"></div>

  <header class="top-header">
    <div class="header-container">
      <div class="tagline">Welcome To K.R. Mangalam University</div>
      <nav class="header-nav">
        <a href="index.html">Home</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact Us</a>
      </nav>
    </div>
  </header>

  <main class="memory-wall">
    <h1>Campus Memory Wall ðŸ“‚</h1>
    <p class="subtitle">Explore your campus events and traditions</p>

    <div class="folder-grid" id="folderGrid">
    </div>
  </main>

  <div id="galleryModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <h2 id="eventTitle"></h2>
      <div id="galleryContainer" class="gallery-grid"></div>

      <h3 class="upload-heading">Upload a new memory</h3>
      <form id="uploadForm">
        <input type="file" id="uploadFile" accept="image/*,video/*" required>
        <input type="text" id="caption" placeholder="Write a caption..." required>
        <button type="submit" class="upload-btn">Upload</button>
      </form>
    </div>
  </div>

  <footer class="site-footer">
    <p>Â© 2025 Campus Chronicles | Team Unique Syntax</p>
  </footer>

  <script>
    const events = {
      "Induction Program 2025": [
        { type: "image", src: "assets/images/tech1.jpg", caption: "Day 1" },
        { type: "image", src: "assets/images/tech1.jpg", caption: "Day 2" },
        { type: "image", src: "assets/images/tech1.jpg", caption: "Day 3" },
        { type: "image", src: "assets/images/tech1.jpg", caption: "Day 4" },
        { type: "image", src: "assets/images/tech1.jpg", caption: "Day 5" }
      ],
      "EDM Fest 2025": [
        { type: "image", src: "assets/images/fest1.jpg", caption: "DJ Elina Chauhan" },
        { type: "video", src: "assets/videos/fest2.mp4", caption: "DJ Ola Ras" },
        { type: "video", src: "assets/videos/fest2.mp4"}
      ],
      "Diwali Mela 2025": [
        { type: "image", src: "assets/images/orientation1.jpg", caption: "Stalls" },
        { type: "video", src: "assets/videos/orientation2.mp4", caption: "Music Competition" },
        { type: "video", src: "assets/videos/fest2.mp4", caption: "Dance Competition" },
        { type: "image", src: "assets/videos/fest2.mp4", caption: "Moments" }
      ],
      "IDEAS 3.O": [
        { type: "image", src: "assets/images/tech1.jpg", caption: "Music Competition" },
        { type: "video", src: "assets/videos/fest2.mp4", caption: "RCR Performance" },
        { type: "video", src: "assets/videos/fest2.mp4", caption: "Live Band" }
      ]
    };

    const folderGrid = document.getElementById("folderGrid");
    Object.keys(events).forEach(event => {
      const folder = document.createElement("div");
      folder.classList.add("folder-card");
      folder.innerHTML = `
        <img src="images/folder.png" alt="Folder Icon">
        <h3>${event}</h3>
      `;
      folder.addEventListener("click", () => openModal(event));
      folderGrid.appendChild(folder);
    });

    const modal = document.getElementById("galleryModal");
    const gallery = document.getElementById("galleryContainer");
    const title = document.getElementById("eventTitle");
    let currentEvent = "";

    function openModal(event) {
      currentEvent = event;
      title.textContent = event;
      gallery.innerHTML = "";
      if (events[event]) {
        events[event].forEach(item => {
          const div = document.createElement("div");
          div.classList.add("gallery-item");
          div.innerHTML = item.type === "image"
            ? `<img src="${item.src}" alt="${item.caption}">
               <p>${item.caption}</p>`
            : `<video controls src="${item.src}"></video>
               <p>${item.caption}</p>`;
          gallery.appendChild(div);
        });
      }
      modal.style.display = "block";
    }

    function closeModal() {
      modal.style.display = "none";
    }

    document.getElementById("uploadForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const file = document.getElementById("uploadFile").files[0];
      const caption = document.getElementById("caption").value;
      if (file) {
        const newMemory = {
          type: file.type.startsWith("video") ? "video" : "image",
          src: URL.createObjectURL(file),
          caption
        };
        events[currentEvent].push(newMemory);
        openModal(currentEvent); // refresh
        document.getElementById("uploadForm").reset();
      }
    });
  </script>
</body>
</html>